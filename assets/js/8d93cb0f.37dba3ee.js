"use strict";(self.webpackChunksqliste_doc=self.webpackChunksqliste_doc||[]).push([[5151],{9868:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(6687);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(n),m=o,f=c["".concat(l,".").concat(m)]||c[m]||d[m]||a;return n?r.createElement(f,s(s({ref:t},p),{},{components:n})):r.createElement(f,s({ref:t},p))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[c]="string"==typeof e?e:o,s[1]=i;for(var u=2;u<a;u++)s[u]=n[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7765:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var r=n(8792),o=(n(6687),n(9868));const a={sidebar_position:2},s="En-t\xeate HTTP",i={unversionedId:"intregrations/sql-server/http-operations/headers",id:"intregrations/sql-server/http-operations/headers",title:"En-t\xeate HTTP",description:"Les en-t\xeates HTTP permettent au client, comme au serveur, de joindre des informations suppl\xe9mentaires \xe0 la requ\xeate ou \xe0 la r\xe9ponse.",source:"@site/docs/intregrations/sql-server/http-operations/headers.md",sourceDirName:"intregrations/sql-server/http-operations",slug:"/intregrations/sql-server/http-operations/headers",permalink:"/sqliste/docs/intregrations/sql-server/http-operations/headers",draft:!1,editUrl:"https://github.com/corentin703/sqliste/tree/doc/docs/intregrations/sql-server/http-operations/headers.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docSidebar",previous:{title:"Cookies",permalink:"/sqliste/docs/intregrations/sql-server/http-operations/cookies"},next:{title:"Gestion d'erreurs",permalink:"/sqliste/docs/intregrations/sql-server/error-handling"}},l={},u=[{value:"Lecture",id:"lecture",level:2},{value:"\xc9criture",id:"\xe9criture",level:2}],p={toc:u},c="wrapper";function d(e){let{components:t,...n}=e;return(0,o.kt)(c,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"en-t\xeate-http"},"En-t\xeate HTTP"),(0,o.kt)("p",null,"Les en-t\xeates HTTP permettent au client, comme au serveur, de joindre des informations suppl\xe9mentaires \xe0 la requ\xeate ou \xe0 la r\xe9ponse.",(0,o.kt)("br",null),"\nLa plupart de ces informations sont des param\xe8tres, pouvant modifier le comportement du navigateur lorsque joints \xe0 une r\xe9ponse HTTP. "),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"L'en-t\xeate HTTP d'une requ\xeate sera relativement diff\xe9rente de celle d'une r\xe9ponse, les param\xe8tres exprim\xe9s ayant souvent un sens diff\xe9rent selon le cas.",(0,o.kt)("br",null),"\nCertains d'entre eux n'ont de sens que dans une requ\xeate ou que dans une r\xe9ponse.")),(0,o.kt)("p",null,"Pour en savoir plus sur les valeurs standards, et leur utilisation, vous pouvez consulter cette ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/fr/docs/Web/HTTP/Headers"},"ressource"),"."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Il est tout \xe0 fait possible de d\xe9finir vos param\xe8tres personnalis\xe9s, cependant gardez \xe0 l'esprit que l'en-t\xeate HTTP est limit\xe9e en taille (maximum 8192 octets, tous param\xe8tres confondus).")),(0,o.kt)("h2",{id:"lecture"},"Lecture"),(0,o.kt)("p",null,"La lecture d'une donn\xe9e dans l'en-t\xeate est similaire \xe0 la lecture d'un cookie : nous disposons aussi d'un dictionnaire cl\xe9/valeur o\xf9 la cl\xe9 correspond au nom de l'information, et la valeur \xe0 la donn\xe9e."),(0,o.kt)("p",null,"Exemple : lecture d'un jeton d'authentification dans l'en-t\xeate (param\xe8tre ",(0,o.kt)("em",{parentName:"p"},"Authorization"),")"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},'#Route("/api/exemple/headers/read")\n#HttpGet("ExempleLectureHeader")\nCREATE OR ALTER PROCEDURE [web].[p_exemple_cookie]\n    @request_headers NVARCHAR(MAX) \nAS \nBEGIN\n    DECLARE @auth_token NVARCHAR(MAX);\n    DECLARE @username NVARCHAR(500);\n    \n    -- R\xe9cup\xe9ration du de la valeur contenu dans le param\xe8tre "Authorization"\n    SET @auth_token = JSON_VALUE(@request_headers, \'$.Authorization\');\n\n    -- V\xe9rification du jeton et r\xe9cup\xe9ration de l\'utilisateur...\n\n    SELECT \n         \'{ "message": "Bienvenu \' + @username  + \' !" }\' AS [response_body]\n        ,200 AS [response_status]\n    ;\nEND\nGO\n')),(0,o.kt)("h2",{id:"\xe9criture"},"\xc9criture"),(0,o.kt)("p",null,"\xc0 la diff\xe9rence des cookies, l'\xe9criture d'une information dans l'en-t\xeate se fait aussi via un dictionnaire cl\xe9/valeur r\xe9pondant \xe0 la m\xeame logique que lors de la lecture."),(0,o.kt)("p",null,"Exemple : on d\xe9finit le param\xe8tre ",(0,o.kt)("em",{parentName:"p"},"Max-Age")," afin que notre ressource soit mise en cache dans le navigateur, et re-demand\xe9e uniquement lorsqu'elle sera expir\xe9e."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},'#Route("/api/exemple/headers/write")\n#HttpGet("ExempleLectureHeader")\nCREATE OR ALTER PROCEDURE [web].[p_exemple_cookie]\n    @request_headers NVARCHAR(MAX) \nAS \nBEGIN\n    DECLARE @push_notification_token NVARCHAR(MAX);\n    \n    -- R\xe9cup\xe9ration du jeton permettant de recevoir des notifications push... \n    \n    -- On d\xe9finit l\'en-t\xeate "Max-Age"\n    SET @request_headers = JSON_MODIFY(@request_headers, \'$."Max-Age"\', 21600); -- 60 * 24 * 15 = 21600 secondes = 15 jours\n    \n    SELECT \n         \'{ "token": "\' + @push_notification_token + \'" }\' AS [response_body]\n        ,200 AS [response_status]\n        ,@request_headers AS [request_headers]\n    ;\nEND\nGO\n')))}d.isMDXComponent=!0}}]);