"use strict";(self.webpackChunksqliste_doc=self.webpackChunksqliste_doc||[]).push([[5151],{9868:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>m});var n=r(6687);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),p=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},d=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=p(r),u=a,m=c["".concat(l,".").concat(u)]||c[u]||h[u]||o;return r?n.createElement(m,i(i({ref:t},d),{},{components:r})):n.createElement(m,i({ref:t},d))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:a,i[1]=s;for(var p=2;p<o;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},7765:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var n=r(8792),a=(r(6687),r(9868));const o={sidebar_position:2},i="HTTP Headers",s={unversionedId:"intregrations/sql-server/http-operations/headers",id:"intregrations/sql-server/http-operations/headers",title:"HTTP Headers",description:"HTTP headers allow both the client and the server to attach additional information to the request or the response.",source:"@site/docs/intregrations/sql-server/http-operations/headers.md",sourceDirName:"intregrations/sql-server/http-operations",slug:"/intregrations/sql-server/http-operations/headers",permalink:"/sqliste/docs/intregrations/sql-server/http-operations/headers",draft:!1,editUrl:"https://github.com/corentin703/sqliste/tree/main/doc/docs/intregrations/sql-server/http-operations/headers.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docSidebar",previous:{title:"Cookies",permalink:"/sqliste/docs/intregrations/sql-server/http-operations/cookies"},next:{title:"Error Handling",permalink:"/sqliste/docs/intregrations/sql-server/error-handling"}},l={},p=[{value:"Reading",id:"reading",level:2},{value:"Writing",id:"writing",level:2}],d={toc:p},c="wrapper";function h(e){let{components:t,...r}=e;return(0,a.kt)(c,(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"http-headers"},"HTTP Headers"),(0,a.kt)("p",null,"HTTP headers allow both the client and the server to attach additional information to the request or the response.\nMost of this information consists of parameters that can modify the behavior of the browser when included in an HTTP response."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"The HTTP header of a request will be significantly different from that of a response, as the expressed parameters often have a different meaning depending on the context.\nSome of them are only meaningful in a request or in a response.")),(0,a.kt)("p",null,"To learn more about standard header values and their usage, you can refer to this resource."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"It is possible to define custom parameters, but keep in mind that the HTTP header is limited in size (maximum of 8192 bytes, including all parameters).")),(0,a.kt)("h2",{id:"reading"},"Reading"),(0,a.kt)("p",null,"Reading a data from the header is similar to reading a cookie: we also have a key/value dictionary where the key corresponds to the name of the information, and the value is the data."),(0,a.kt)("p",null,"Example: reading an authentication token from the header (the ",(0,a.kt)("em",{parentName:"p"},"Authorization")," parameter)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},'#Route("/api/example/headers/read")\n#HttpGet("ExampleReadHeader")\nCREATE OR ALTER PROCEDURE [web].[p_example_header]\n    @request_headers NVARCHAR(MAX) \nAS \nBEGIN\n    DECLARE @auth_token NVARCHAR(MAX);\n    DECLARE @username NVARCHAR(500);\n    \n    -- Retrieve the value from the "Authorization" parameter\n    SET @auth_token = JSON_VALUE(@request_headers, \'$.Authorization\');\n\n    -- Verify the token and retrieve the user...\n    SELECT \n         \'{ "message": "Welcome, \' + @username  + \'!" }\' AS [response_body]\n        ,200 AS [response_status]\n    ;\nEND\nGO\n')),(0,a.kt)("h2",{id:"writing"},"Writing"),(0,a.kt)("p",null,"Unlike cookies, writing information to the header is also done using a key/value dictionary following the same logic as reading."),(0,a.kt)("p",null,"Example: we set the ",(0,a.kt)("em",{parentName:"p"},"Max-Age")," parameter so that our resource is cached in the browser and only requested again when it expires."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},'#Route("/api/example/headers/write")\n#HttpGet("ExampleWriteHeader")\nCREATE OR ALTER PROCEDURE [web].[p_example_header]\n    @request_headers NVARCHAR(MAX) \nAS \nBEGIN\n    DECLARE @push_notification_token NVARCHAR(MAX);\n    \n    -- Retrieve the token for receiving push notifications... \n    \n    -- Set the "Max-Age" header\n    SET @request_headers = JSON_MODIFY(@request_headers, \'$."Max-Age"\', 21600); -- 60 * 24 * 15 = 21600 seconds = 15 days\n    \n    SELECT \n         \'{ "token": "\' + @push_notification_token + \'" }\' AS [response_body]\n        ,200 AS [response_status]\n        ,@request_headers AS [request_headers]\n    ;\nEND\nGO\n')))}h.isMDXComponent=!0}}]);